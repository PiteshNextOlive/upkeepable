<div class="container">
    <div class="row">
        <div class="col-xl-12">
            <div class="breadcrumb-box">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:;" (click)="onClickDashboard()">Dashboard</a></li>
                        <li class="breadcrumb-item active" aria-current="page">All Clients</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12">
            <div class="dashboard-search full-width">
                <div class="form-group">
                    <i class="fas fa-search"></i>
                    <input class="form-control form-control-lg form-control-borderless" type="search" (input)="searchKeyUp($event)" (keyup)="searchKeyUp($event)" (keydown)="searchPressed($event)" placeholder="Search by name, email, or address" id="searchKeyword">
                    <button class="btn btn-lg btn-danger" *ngIf="searchText.length>0" (click)="clearSearch()" type="button"></button>
                    <button class="btn btn-lg btn-success" (click)="onClickSearchBar()" type="button"></button>
                </div>
            </div>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12">
            <div class="added-new-client-btn">
                <a href="javascript:;" (click)="openInviteClientModal(inviteClientModalContent)" class="btn-primary-small">
                    + Add new homeowner
                </a>
            </div>
        </div>
    </div>
</div>


<app-client-manager #clientManagerTemplate [userId]="userId" [showHeaderTitle]=true></app-client-manager>

<!-- <div class="container">
    <div class="row mb-5">
        <div class="col-xl-5 col-lg-12 col-md-12">
        </div>
        <div class="col-xl-7 col-lg-12 col-md-12">
            <div class="pagination-per-page">

                <div class="results-per-page-box">

                    <p>Results per page:</p>
                    <div class="form-group">

                        <div class="select-dropdown">
                            <select class="form-select" aria-label="Default select example">
                                <option selected>10</option>
                                <option value="1">15</option>
                                <option value="2">20</option>
                                <option value="2">25</option>
                                <option value="2">30</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="pagination p1">
                    <ul>
                        <li class="left-arrow-pagi"><a href="#"><i class="fas fa-angle-left"></i></a></li>
                        <li> <a class="is-active" href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">6</a></li>
                        <li><a href="#">7</a></li>
                        <li class="right-arrow-pagi"><a href="#"><i class="fas fa-angle-right"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div> -->


<!-- Modal -->
<div class="create-new-owner-modal">
    <div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">

        <div class="modal-dialog modal-lg modal-dialog-centered">
            <!-- <div class="modal-content"> -->
            <ng-template #inviteClientModalContent let-modal>
                <form [formGroup]="inputForm" (ngSubmit)="onSubmit()">
                    <div class="modal-header">
                        <button type="button" class="btn-close" (click)="onClickCloseModal()" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="add-footer-modal-heading">
                            <h4>Create New Homeowner</h4>
                            <p>Fill the complete information about new homeowner</p>
                        </div>
                        <div class="create-new-owner-modal-form">
                            <div class="row">
                                <div class="col-lg-6 col-md-12">
                                    <div class="form-group">
                                        <label for="company">First Name <span>*</span></label>
                                        <input type="text" class="form-control" placeholder="First Name" formControlName="firstName">
                                        <div *ngIf="InviteClientformControls.firstName.invalid && (submitted || InviteClientformControls.firstName.dirty || InviteClientformControls.firstName.touched)" class="text-danger">
                                            <div *ngIf="InviteClientformControls.firstName.errors?.required">
                                                First name is required.
                                            </div>
                                            <div *ngIf="InviteClientformControls.firstName.errors?.pattern">
                                                Invalid First name.
                                            </div>
                                            <div *ngIf="InviteClientformControls.firstName.errors?.maxlength">
                                                First name can be max 20 characters long.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--  col-md-6   -->
                                <div class="col-lg-6 col-md-12">
                                    <div class="form-group">
                                        <label for="company">Last Name <span>*</span></label>
                                        <input type="text" class="form-control" placeholder="Last Name" formControlName="lastName">
                                        <div *ngIf="InviteClientformControls.lastName.invalid && (submitted || InviteClientformControls.lastName.dirty || InviteClientformControls.lastName.touched)" class="text-danger">
                                            <div *ngIf="InviteClientformControls.lastName.errors?.required">
                                                Last name is required.
                                            </div>
                                            <div *ngIf="InviteClientformControls.lastName.errors?.pattern">
                                                Invalid Last name.
                                            </div>
                                            <div *ngIf="InviteClientformControls.lastName.errors?.maxlength">
                                                Last name can be max 20 characters long.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--  col-md-6   -->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="phone">Phone <span></span></label>
                                        <!-- <label for="phone">Phone <span>*</span></label> -->
                                        <input type="text" formControlName="phone" class="form-control" placeholder="Phone" id="phone">

                                        <div *ngIf="(InviteClientformControls.phone.invalid) && (submitted || InviteClientformControls.phone.dirty || InviteClientformControls.phone.touched)" class="text-danger">
                                            <!-- <div *ngIf="InviteClientformControls.phone.errors?.required">
                                                Phone is required.
                                            </div> -->
                                            <div *ngIf="InviteClientformControls.phone.errors?.pattern">
                                                Invalid phone number.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--  col-md-6   -->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="email">Email address <span>*</span></label>
                                        <input type="email" class="form-control" placeholder="Email" formControlName="email" (keyup)="checkDuplicateEmail()" (focusout)="onEmailFocusOut()">
                                        <div *ngIf="(InviteClientformControls.email.invalid) && (submitted || InviteClientformControls.email.dirty || InviteClientformControls.email.touched)" class="text-danger">
                                            <div *ngIf="InviteClientformControls.email.errors?.required">
                                                Email address is required.
                                            </div>
                                            <div *ngIf="InviteClientformControls.email.errors?.pattern">
                                                Invalid email address.
                                            </div>
                                        </div>
                                        <div *ngIf="isDuplicateEmail && (!InviteClientformControls.email.errors?.pattern) && (!InviteClientformControls.email.errors?.required)" class="text-danger">
                                            Email id already exists..!
                                        </div>
                                    </div>
                                </div>
                                <!--  col-md-6   -->
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="email">Home address <span></span></label>
                                        <!-- <label for="email">Home address <span>*</span></label> -->
                                        <input type="text" class="form-control" placeholder="Home address" formControlName="address">
                                        <div *ngIf="InviteClientformControls.address.invalid && (submitted || InviteClientformControls.address.dirty || InviteClientformControls.address.touched)" class="text-danger">
                                            <!-- <div *ngIf="InviteClientformControls.address.errors?.required">
                                                Address is required.
                                            </div> -->
                                            <div *ngIf="InviteClientformControls.address.errors?.pattern">
                                                Invalid Address.
                                            </div>
                                            <div *ngIf="InviteClientformControls?.address?.errors?.maxlength">
                                                Address can be max 500 characters long.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--  col-md-6   -->

                            </div>
                            <div class="row">


                                <!--  col-md-4   -->
                                <div class="col-lg-4 col-md-12">
                                    <div class="form-group">
                                        <div class="select-dropdown">
                                            <!-- <select class="form-select" formControlName="cityRefId"
                aria-label="Default select example">
                <option value="" selected>City Name</option>
                <option *ngFor="let cityType of cityTypeEnum" value="{{cityType.value}}">
                    {{cityType.description}}
                </option>
            </select> -->
                                            <input type="text" class="form-control" (focusout)="commonOpsService.trimFormControlOnFocusOut($event, inputForm, 'cityName')" placeholder="City Name" formControlName="cityName">
                                            <div *ngIf="(InviteClientformControls.cityName.invalid) && (submitted || InviteClientformControls.cityName.dirty || InviteClientformControls.cityName.touched)" class="text-danger">
                                                <!-- <div *ngIf="InviteClientformControls.cityName.errors?.required">
                                                    City is required.
                                                </div> -->
                                                <div *ngIf="InviteClientformControls.cityName?.errors?.pattern">
                                                    Invalid City.
                                                </div>
                                                <div *ngIf="InviteClientformControls.cityName?.errors?.maxlength">
                                                    City can be max 20 characters long.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-lg-4 col-md-12">
                                    <div class="form-group">
                                        <div class="select-dropdown">
                                            <select class="form-select" formControlName="stateCode" aria-label="Default select example">
                                                <option value="" selected>State Name</option>
                                                <option *ngFor="let state of states" value="{{state.stateCode}}">
                                                    {{state.stateTitle}}
                                                </option>
                                            </select>
                                            <!-- <div *ngIf="(InviteClientformControls.stateCode.invalid) && (submitted || InviteClientformControls.stateCode.dirty || InviteClientformControls.stateCode.touched)" class="text-danger">
                                                <div *ngIf="InviteClientformControls.stateCode.errors?.required">
                                                    State is required.
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>

                                <!--  col-md-4   -->
                                <div class="col-lg-4 col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control" formControlName="zipCode" placeholder="Zip Code">
                                        <div *ngIf="(InviteClientformControls.zipCode.invalid) && (submitted || InviteClientformControls.zipCode.dirty || InviteClientformControls.zipCode.touched)" class="text-danger">
                                            <!-- <div *ngIf="InviteClientformControls.zipCode.errors?.required">
                                                Zip code is required.
                                            </div> -->
                                            <div *ngIf="InviteClientformControls.zipCode.errors?.pattern">
                                                Invalid zip code.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--  col-md-4   -->
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="upload-image-box" *ngIf="homePhoto">
                                        <img class="img-fluid" id="homePhotoImgElement" [src]="homePhoto" alt="profile-change-img">
                                    </div>

                                    <!-- <div class="text-danger img-size-error" *ngIf="!invalidSize">
                                        Maximum File Size Limit is 1MB
                                    </div> -->
                                    <ul class="upload-image-box-link">
                                        <li>

                                            <input type="file" accept="image/png, image/jpeg" id="homePhotoBrowserInput" (change)="onHomeProfilePhotoBrowserInputChange($event,'homePhotoImgElement', '4.52')" style="display: none;">

                                            <a href="javascript:;" onclick="homePhotoBrowserInput.value = null" (click)="passClickToHomeProfileFileInput('homePhotoBrowserInput')" class="btn-primary-small">Upload Home Image</a>
                                        </li>
                                        <li> <a href="javascript:;" *ngIf="homePhoto" (click)="onRemoveImage()" class="btn-secondary-small">Remove</a></li>
                                    </ul>
                                </div>
                            </div>


                        </div>
                    </div>
                    <div class="modal-footer rea-modal-footer">
                        <button type="button" (click)="onSubmitWithSkipHomeDetails()" class="btn btn-primary">skip home owner profile</button>
                        <button type="button" (click)="onSubmitWithCompleteHomeDetails()" class="btn btn-disable" data-bs-dismiss="modal">Complete home owner profile</button>
                    </div>
                </form>
            </ng-template>
            <!-- </div> -->
        </div>
    </div>
</div>
<ng-template #cropImageModal let-modal>
    <div class="modal-header">
        <button type="button" (click)="onCancelCropImageModal()" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <app-image-cropper-tool [targetParentImageElementId]="targetImageElementId" [aspectRatio]="aspectRatio" (passCroppedImageToParentEvent)="onImageCropper($event)" [fileUploadEventObject]="fileUploadEventObject">
    </app-image-cropper-tool>
</ng-template>